# Constitutional AI Backend Configuration
# Copy to .env and adjust values for your environment.
# All environment variables use CONST_ prefix.

# ═══════════════════════════════════════════════════════════════════
# Application
# ═══════════════════════════════════════════════════════════════════
CONST_APP_NAME="Constitutional AI"
CONST_APP_VERSION="2.0.0"
CONST_DEBUG=false

# ═══════════════════════════════════════════════════════════════════
# Server
# ═══════════════════════════════════════════════════════════════════
CONST_HOST=0.0.0.0
CONST_PORT=8900

# ═══════════════════════════════════════════════════════════════════
# ChromaDB (Vector Database)
# ═══════════════════════════════════════════════════════════════════
CONST_CHROMADB_PATH=/path/to/chromadb_data
CONST_PDF_CACHE_PATH=/path/to/pdf_cache

# ═══════════════════════════════════════════════════════════════════
# LLM Configuration
# ═══════════════════════════════════════════════════════════════════
# OpenAI-compatible llama-server endpoint
CONST_LLM_BASE_URL=http://localhost:8080/v1
CONST_LLM_TIMEOUT=60.0
CONST_CONSTITUTIONAL_MODEL=Mistral-Nemo-Instruct-2407-Q5_K_M.gguf
CONST_GGUF_CONTEXT_WINDOW=32768

# ═══════════════════════════════════════════════════════════════════
# Embedding Model (Jina v3)
# ═══════════════════════════════════════════════════════════════════
CONST_EMBEDDING_MODEL=jinaai/jina-embeddings-v3
CONST_EXPECTED_EMBEDDING_DIM=1024

# ═══════════════════════════════════════════════════════════════════
# Reranking (Jina Cross-Encoder)
# ═══════════════════════════════════════════════════════════════════
CONST_RERANKING_ENABLED=true
CONST_RERANKING_MODEL=jinaai/jina-reranker-v2-base-multilingual
CONST_RERANKING_SCORE_THRESHOLD=0.1
CONST_RERANKING_TOP_N=5

# ═══════════════════════════════════════════════════════════════════
# CRAG (Corrective RAG) Pipeline
# ═══════════════════════════════════════════════════════════════════
CONST_CRAG_ENABLED=true
CONST_CRAG_ENABLE_SELF_REFLECTION=false
CONST_CRAG_GRADE_THRESHOLD=0.25
CONST_CRAG_MAX_REWRITE_ATTEMPTS=2
CONST_CRAG_GRADER_MODEL=Qwen2.5-0.5B-Instruct-Q5_K_M.gguf

# ═══════════════════════════════════════════════════════════════════
# Structured Output & Critic-Revise Loop
# ═══════════════════════════════════════════════════════════════════
CONST_STRUCTURED_OUTPUT_ENABLED=true
CONST_CRITIC_REVISE_ENABLED=true
CONST_CRITIC_MAX_REVISIONS=1

# ═══════════════════════════════════════════════════════════════════
# Search Configuration
# ═══════════════════════════════════════════════════════════════════
CONST_DEFAULT_SEARCH_LIMIT=10
CONST_SEARCH_TIMEOUT=5.0
CONST_RRF_BM25_WEIGHT=1.2
CONST_RRF_K=45.0

# ═══════════════════════════════════════════════════════════════════
# Logging
# ═══════════════════════════════════════════════════════════════════
CONST_LOG_LEVEL=INFO
CONST_LOG_JSON=false
# CONST_LOG_FILE=/path/to/constitutional-ai.log

# ═══════════════════════════════════════════════════════════════════
# CORS (comma-separated or JSON list)
# ═══════════════════════════════════════════════════════════════════
# CONST_CORS_ORIGINS=["http://localhost:5173","http://localhost:3000"]

# ═══════════════════════════════════════════════════════════════════
# Test Configuration (not for production)
# ═══════════════════════════════════════════════════════════════════
# RUN_INTEGRATION_TESTS=1
# RUN_OLLAMA_TESTS=1
# DETERMINISTIC_EVAL=true

# ═══════════════════════════════════════════════════════════════════
# Authentication (optional — if not set, write operations are open)
# ═══════════════════════════════════════════════════════════════════
# CONST_API_KEY=your-secret-api-key-here
